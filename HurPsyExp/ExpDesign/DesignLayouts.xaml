<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:expapp="clr-namespace:HurPsyExp"
                    xmlns:expdesign="clr-namespace:HurPsyExp.ExpDesign"
                    xmlns:expstrings="clr-namespace:HurPsyExpStrings;assembly=HurPsyExpStrings">

    <ResourceDictionary.MergedDictionaries>
        <ResourceDictionary Source="DesignTemplates.xaml"/>
    </ResourceDictionary.MergedDictionaries>
    
    <!-- Since this Menu is defined as a separate resource used when needed,
         its DataContext had to be bound to DesignWindow's DataContext (aka DesignViewModel) -->
    <Menu x:Key="MainContentMenu"
          HorizontalAlignment="Center"
          FontSize="{Binding Source={StaticResource AppSettings}, Path=MenuFontSize}"
          DataContext="{Binding Path=DataContext, RelativeSource={RelativeSource AncestorType=expdesign:DesignWindow}}">
        
        <MenuItem Header="{x:Static expstrings:StringResources.Header_Definitions}">
            <MenuItem Header="{x:Static expstrings:StringResources.Header_StimulusDefinitions}"
                      Command="{Binding ChooseContentCommand}"
                      CommandParameter="{x:Static expapp:ContentChoice.StimulusDefinitions}">
                <MenuItem.Icon>
                    <Image Source="/Images/sbase.png"
                           Height="{Binding Source={StaticResource AppSettings}, Path=ImagePreviewHeight}"/>
                </MenuItem.Icon>
            </MenuItem>
            <MenuItem Header="{x:Static expstrings:StringResources.Header_LocatorDefinitions}"
                      Command="{Binding ChooseContentCommand}"
                      CommandParameter="{x:Static expapp:ContentChoice.LocatorDefinitions}">
                <MenuItem.Icon>
                    <Image Source="/Images/lbase.png"
                           Height="{Binding Source={StaticResource AppSettings}, Path=ImagePreviewHeight}"/>
                </MenuItem.Icon>
            </MenuItem>
        </MenuItem>
    </Menu>

    <TextBlock x:Key="MainContentLabel"
               Margin="2" Background="LightBlue"
               TextAlignment="Center"
               FontSize="{Binding Source={StaticResource AppSettings}, Path=FontSize}"
               Text="{Binding Path=DisplayContentLabel}">
    </TextBlock>

    <DockPanel x:Key="SingleLayout" LastChildFill="True">
        <ContentControl DockPanel.Dock="Top"
                        HorizontalAlignment="Stretch"
                        Height="Auto">
            <ContentControl.Style>
                <Style TargetType="ContentControl">
                    <Style.Triggers>
                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter Property="Content" Value="{StaticResource MainContentMenu}"/>
                        </Trigger>
                        <Trigger Property="IsMouseOver" Value="False">
                            <Setter Property="Content" Value="{StaticResource MainContentLabel}"/>
                        </Trigger>
                    </Style.Triggers>
                </Style>
            </ContentControl.Style>
        </ContentControl>

        <StackPanel Orientation="Horizontal" DockPanel.Dock="Top">
            <ToggleButton x:Name="btnEditMode" IsChecked="False"
                          Height="{Binding Source={StaticResource AppSettings}, Path=CommandButtonHeight}"
                          Command="{Binding ToggleEditCommand}">
                <Image Source="/Images/editmode.png" Stretch="UniformToFill"/>
            </ToggleButton>
        </StackPanel>

        <ListBox ItemsSource="{Binding DisplayContent}"
                 FontSize="{Binding Source={StaticResource AppSettings}, Path=SmallFontSize}"
                 ItemTemplate="{StaticResource IdObjectVMTemplate}"
                 HorizontalContentAlignment="Stretch"/>

    </DockPanel>

    <Grid x:Key="SplitLayout">
        <Grid.ColumnDefinitions>
            <ColumnDefinition/>
            <ColumnDefinition Width="Auto" />
            <ColumnDefinition/>
        </Grid.ColumnDefinitions>

        <ContentControl x:Name="ItemDisplayControl" Grid.Column="0"
                        Content="{StaticResource SingleLayout}"/>

        <GridSplitter Grid.Column="1"
                  HorizontalAlignment="Center"
                  VerticalAlignment="Stretch"
                  Background="Black" 
                  ShowsPreview="True"
                  Width="5"/>

        <ContentControl x:Name="ItemPreviewControl" Grid.Column="2"/>
    </Grid>
</ResourceDictionary>