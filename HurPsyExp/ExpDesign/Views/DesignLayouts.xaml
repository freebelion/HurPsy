<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:expdesign="clr-namespace:HurPsyExp.ExpDesign">

    <ResourceDictionary.MergedDictionaries>
        <ResourceDictionary Source="DisplayTemplates.xaml"/>
        <ResourceDictionary Source="EditTemplates.xaml"/>
    </ResourceDictionary.MergedDictionaries>

    <expdesign:ItemTemplateSelector x:Key="displayTemplateSelector"
                                    ItemEdit="False"/>

    <expdesign:ItemTemplateSelector x:Key="editTemplateSelector"
                                    ItemEdit="True"/>

    <DataTemplate x:Key="ItemDisplayTemplate">
        <Grid>
            <ListBox ItemsSource="{Binding MainContent}"
                     ItemTemplateSelector="{StaticResource displayTemplateSelector}"/>
        </Grid>
    </DataTemplate>

    <DataTemplate x:Key="ItemEditTemplate">
        <Grid>
            <ListBox ItemsSource="{Binding MainContent}"
                     ItemTemplateSelector="{StaticResource editTemplateSelector}"/>
        </Grid>
    </DataTemplate>

    <DataTemplate x:Key="SingleLayout">
        <ScrollViewer>
            <StackPanel>
                <ContentControl x:Name="ItemEditControl"
                                ContentTemplate="{StaticResource ItemDisplayTemplate}"/>

                <ContentControl x:Name="ItemDisplayControl"
                                ContentTemplate="{StaticResource ItemEditTemplate}"/>
            </StackPanel>
        </ScrollViewer>
    </DataTemplate>

    <DataTemplate x:Key="SplitLayout">
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition/>
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition/>
            </Grid.ColumnDefinitions>

            <ContentControl x:Name="ItemDisplayControl" Grid.Column="0"
                            ContentTemplate="{StaticResource ItemDisplayTemplate}"/>
            
            <GridSplitter Grid.Column="1"
                          HorizontalAlignment="Center"
                          VerticalAlignment="Stretch"
                          Background="Black" 
                          ShowsPreview="True"
                          Width="5"/>

            <ContentControl x:Name="ItemEditControl" Grid.Column="2"
                            ContentTemplate="{StaticResource ItemEditTemplate}"/>
            
        </Grid>
    </DataTemplate>
</ResourceDictionary>